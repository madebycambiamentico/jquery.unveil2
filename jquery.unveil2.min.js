/**
 * jQuery Unveil 2
 * A very lightweight jQuery plugin to lazy load images
 *
 * Licensed under the GPL 3 license.
 * Copyright 2017 Nereo Costacurta
 * https://github.com/madebycambiamentico
 */
!function(t,n){n.fn.unveil=function(e,i){function o(){var t=r.filter(function(){return null!==this.offsetParent&&((l=this.getBoundingClientRect()).top>=e.thr[0]&&l.top<=c-e.thr[1]||l.top<=e.thr[0]&&l.bottom>=c-e.thr[1]||this.offsetTop<=e.thr[0])});return s=t.addClass(e.uclass).trigger("unveil"),(r=r.not(s)).length}function a(){var t=u.scrollTop();d===t?f(a):(d=t,o()||!e.hasEnd?f(a):u.off(".unveil"))}Image.udata||(Image.prototype.udata=document.body.dataset?function(t){return this.dataset[t]}:function(t){return this.getAttribute("data-"+t)});var s,r=this,u=n(t);e=n.extend({thr:[0,0],uclass:"unveiled",lclass:"loaded",hasEnd:void 0===i},e),i?(i.options=function(t){return e=n.extend(e,t)},i.addImgs=function(t){return r.add(t)},i.delImgs=function(t){return r=r.not(t)},"callback"in i||(i.callback=n.noop)):i={callback:n.noop},r.one("unveil",function(){var t=this.udata("src");t&&(this.onload=function(){this.className+=" "+e.lclass,i.callback(this)},this.src=t)});var l,c=u.height();u.on("resize.unveil",function(){c=u.height()});var f=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||!1;if(f){console.info("Using requestAnimationFrame for unveil detection");var d=u.scrollTop();u.on("resize.unveil",function(){d--,f(a)}),a()}else{console.info("Using scroll event 100ms for unveil detection");var h,m=!1;u.on("scroll.unveil resize.unveil",function(){m||(m=!0,clearTimeout(h),o(),setTimeout(function(){m=!1},100),h=setTimeout(function(){!o()&&e.hasEnd&&u.off(".unveil")},200))})}return o(),this}}(window,jQuery);
