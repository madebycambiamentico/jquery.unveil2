/**
 * jQuery Unveil 2
 * A very lightweight jQuery plugin to lazy load images
 *
 * Licensed under the GPL 3 license.
 * Copyright 2017 Nereo Costacurta
 * https://github.com/madebycambiamentico
 */
!function(n,t){t(function(){Image.prototype.udata=document.body.dataset?function(n){return this.dataset[n]}:function(n){return this.getAttribute("data-"+n)},t.fn.unveil=function(e,i){function o(){var n=a.filter(function(){return null!==this.offsetParent&&((l=this.getBoundingClientRect()).top>=e.thr[0]&&l.top<=c-e.thr[1]||l.top<=e.thr[0]&&l.bottom>=c-e.thr[1]||this.offsetTop<=e.thr[0])});return r=n.addClass(e.uclass).trigger("unveil"),(a=a.not(r)).length}function s(){var n=u.scrollTop();d===n?f(s):(d=n,o()||!e.hasEnd?f(s):u.off(".unveil"))}var r,a=this,u=t(n);e=t.extend({thr:[0,0],uclass:"unveiled",lclass:"loaded",hasEnd:void 0===i},e),i?(i.options=function(n){return e=t.extend(e,n)},i.addImgs=function(n){return a.add(n)},i.delImgs=function(n){return a=a.not(n)},"callback"in i||(i.callback=t.noop)):i={callback:t.noop},a.one("unveil",function(){var n=this.udata("src");n&&(this.onload=function(){this.className+=" "+e.lclass,i.callback(this)},this.src=n)});var l,c=u.height();u.on("resize.unveil",function(){c=u.height()});var f=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.msRequestAnimationFrame||n.oRequestAnimationFrame||!1;if(f){console.info("Using requestAnimationFrame for unveil detection");var d=u.scrollTop();u.on("resize.unveil",function(){d--,f(s)}),s()}else{console.info("Using scroll event 100ms for unveil detection");var h,m=!1;u.on("scroll.unveil resize.unveil",function(){m||(m=!0,clearTimeout(h),o(),setTimeout(function(){m=!1},100),h=setTimeout(function(){!o()&&e.hasEnd&&u.off(".unveil")},200))})}return o(),this}})}(window,jQuery);
