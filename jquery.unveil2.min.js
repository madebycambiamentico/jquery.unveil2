/**
 * jQuery Unveil 2
 * A very lightweight jQuery plugin to lazy load images
 *
 * Licensed under the GPL 3 license.
 * Copyright 2017 Nereo Costacurta
 * https://github.com/madebycambiamentico
 */
!function(n,t){t.fn.unveil=function(e,i){function o(){var n=u.filter(function(){return null!==this.offsetParent&&((l=this.getBoundingClientRect()).top>=e.thr[0]&&l.top<=c-e.thr[1]||l.top<=e.thr[0]&&l.bottom>=c-e.thr[1]||this.offsetTop<=e.thr[0])});return s=n.addClass(e.uclass).trigger("unveil"),(u=u.not(s)).length}function r(){var n=a.scrollTop();h!==n?(h=n,o()||!e.hasEnd?f(r):a.off(".unveil")):f(r)}var s,u=this,a=t(n);e=t.extend({thr:[0,0],uclass:"unveiled",hasEnd:void 0===i},e),i?(i.options=function(n){return e=t.extend(e,n)},i.addImgs=function(n){return u.add(n)},i.delImgs=function(n){return u=u.not(n)},"callback"in i||(i.callback=t.noop)):i={callback:t.noop},u.one("unveil",function(){var n=t(this).data("src");n&&(this.onload=function(){i.callback(this)},this.src=n)});var l,c=a.height();a.on("resize.unveil",function(){c=a.height()});var f=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.msRequestAnimationFrame||n.oRequestAnimationFrame||!1;if(f){console.info("Using requestAnimationFrame for unveil detection");var h=a.scrollTop();a.on("resize.unveil",function(){f(r)}),r()}else{console.info("Using scroll event 100ms for unveil detection");var v,m=!1;a.on("scroll.unveil resize.unveil",function(){m||(m=!0,clearTimeout(v),o(),setTimeout(function(){m=!1},100),v=setTimeout(function(){!o()&&e.hasEnd&&a.off(".unveil")},200))})}return o(),this}}(window,jQuery);
